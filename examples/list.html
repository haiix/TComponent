<!DOCTYPE html>
<meta charset="UTF-8">
<script type="module">
import TComponent from '../TComponent.js';

class MyListItem extends TComponent {
  template() {
    return `<li id="_li"></li>`;
  }
  constructor(attrs, text = '') {
    super();
    this.value = text;
  }
  set value(v) {
    this._li.textContent = v;
  }
  get value() {
    return this._li.textContent;
  }
}

class App extends TComponent {
  template() {
    this.uses(MyListItem);
    return `
      <section>
        <ul id="_ul">
          <my-list-item id="_defaultItem">default item</my-list-item>
        </ul>
        <form>
          <input id="_input" />
          <button onclick="this.handleAddButton(event)">Add</button>
        </form>
      </section>
    `;
  }
  init() {
    this._input.value = '';
    this._input.focus();
  }
  handleAddButton(event) {
    event.preventDefault();
    if (!this._input.value) return;
    const item = new MyListItem();
    item.value = this._input.value;
    this._ul.appendChild(item.element);
    this._input.value = '';
    this.init();
  }
}

const app = new App();
document.body.appendChild(app.element);
app.init();

</script>
<script nomodule src="../assets/nomodule.js"></script>